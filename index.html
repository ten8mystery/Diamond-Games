<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Diamond - Better Gaming</title>
  <link rel="icon" href="favicon.png" type="image/png">
  <style>
    /* ---------- Root & Reset ---------- */
    :root{
      --bg:#030308;
      --panel: rgba(255,255,255,0.03);
      --glass: rgba(255,255,255,0.04);
      --accent1: 220 88% 60%; /* blue */
      --accent2: 280 88% 60%; /* purple */
      --accent3: 140 75% 50%; /* green */
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:#e6eef8;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,'Helvetica Neue',Arial}

    /* ---------- Animated background canvas (particles) ---------- */
    canvas#particles{position:fixed;inset:0;z-index:-2;pointer-events:none;will-change:transform}

    /* ---------- Moving orbs ---------- */
    .orb{position:fixed;border-radius:50%;filter:blur(120px);opacity:0.95;mix-blend-mode:screen;z-index:-1;pointer-events:none}
    .orb.orb--a{width:540px;height:540px;left:-8%;top:-6%;background:radial-gradient(circle at 30% 30%, hsla(var(--accent1),0.95) 0%, transparent 50%);animation:orbA 18s ease-in-out infinite}
    .orb.orb--b{width:520px;height:520px;right:-6%;bottom:-8%;background:radial-gradient(circle at 70% 70%, hsla(var(--accent2),0.95) 0%, transparent 50%);animation:orbB 20s ease-in-out infinite}
    .orb.orb--c{width:480px;height:480px;left:10%;bottom:-12%;background:radial-gradient(circle at 60% 40%, hsla(var(--accent3),0.9) 0%, transparent 50%);animation:orbC 24s ease-in-out infinite}
    @keyframes orbA{0%{transform:translate(0,0)}50%{transform:translate(70px,-40px)}100%{transform:translate(0,0)}}
    @keyframes orbB{0%{transform:translate(0,0)}50%{transform:translate(-60px,50px)}100%{transform:translate(0,0)}}
    @keyframes orbC{0%{transform:translate(0,0)}50%{transform:translate(40px,60px)}100%{transform:translate(0,0)}}

    /* ---------- HUD Navbar ---------- */
    .hud{position:fixed;top:18px;left:50%;transform:translateX(-50%);z-index:30;display:flex;align-items:center;gap:14px;width:92%;max-width:1200px;padding:10px 16px;border-radius:14px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.04);box-shadow:0 10px 40px rgba(0,0,0,0.6);backdrop-filter:blur(8px)}
    .logo{display:flex;align-items:center;gap:12px}
    .logo .mark{width:40px;height:40px;border-radius:9px;box-shadow:0 8px 30px rgba(145,90,255,0.18)}
    .logo h1{font-size:18px;margin:0}
    .hud .right{margin-left:auto;display:flex;gap:10px}
    .pill{padding:8px 12px;border-radius:999px;background:var(--panel);border:1px solid rgba(255,255,255,0.03);font-size:13px;display:inline-flex;align-items:center;}

    /* ---------- Tab Button Styles ---------- */
    .hud .right button {
      padding: 12px 24px;
      font-size: 16px;
      font-weight: 600;
      border: none;
      border-radius: 10px;
      background: linear-gradient(145deg, var(--accent1), var(--accent2));
      color: white;
      cursor: pointer;
      transition: transform 200ms ease, background 200ms ease, box-shadow 200ms ease;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    }

    .hud .right button:hover {
      transform: translateY(-2px);
      background: linear-gradient(145deg, var(--accent2), var(--accent1));
      box-shadow: 0 6px 18px rgba(0, 0, 0, 0.3);
    }

    .hud .right button:active {
      transform: translateY(1px);
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
    }

    /* Active Tab Button Styles */
    .hud .right button.active {
      background: linear-gradient(145deg, hsl(var(--accent2)), hsl(var(--accent1)));
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.4);
    }

    /* ---------- Hero ---------- */
    .hero{padding-top:110px;padding-bottom:18px;text-align:center;z-index:5;position:relative}
    .hero h2{font-size:40px;margin:0 0 8px;text-shadow:0 8px 40px rgba(147,51,234,0.12)}
    .hero p{margin:0;color:rgba(230,238,248,0.75)}

    /* ---------- Search bar ---------- */
    .search-wrap{display:flex;justify-content:center;margin-top:18px}
    .search{width:680px;max-width:92%;padding:12px 18px;border-radius:999px;border:1px solid rgba(255,255,255,0.04);background:var(--glass);display:flex;gap:10px;align-items:center;box-shadow:0 10px 40px rgba(99,102,241,0.04)}
    .search input{flex:1;background:transparent;border:0;color:inherit;font-size:16px;outline:none}

    /* ---------- Grid ---------- */
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:22px;max-width:1200px;margin:36px auto;padding:0 18px;z-index:5}

    /* ---------- Card ---------- */
    .card{position:relative;overflow:hidden;border-radius:14px;padding:12px;background:rgba(8,9,12,0.8);border:1px solid rgba(255,255,255,0.03);box-shadow:0 8px 30px rgba(0,0,0,0.6);transition:transform 260ms cubic-bezier(.2,.9,.2,1), box-shadow 260ms;will-change:transform,box-shadow,opacity;transform-style:preserve-3d;backface-visibility:hidden}
    .card .thumb{width:100%;height:150px;object-fit:cover;border-radius:10px;display:block}
    .card .meta{padding:12px 6px;text-align:center}
    .card h3{margin:0 0 8px 0;font-size:18px}
    .card .play{display:inline-block;padding:10px 14px;border-radius:10px;border:none;color:white;background:linear-gradient(90deg,hsl(var(--accent1)),hsl(var(--accent2)));box-shadow:0 10px 30px hsla(var(--accent1),0.18);cursor:pointer;transition:transform 160ms}
    .card .play:hover{transform:translateY(-4px) scale(1.03)}

    /* small screens */
    @media (max-width:640px){.hero h2{font-size:26px}.search{width:92%}}
  </style>
</head>
<body>
  <div class="hud">
    <div class="logo">
      <div class="mark">
        <img src="favicon.png" alt="Logo" style="width: 40px; height: 40px; border-radius: 9px;">
      </div>
      <div>
        <h1>Diamond</h1>
        <div style="font-size:12px;color:rgba(230,238,248,0.7);">Upgraded Gaming</div>
      </div>
    </div>

    <div class="right">
      <button id="gamesTab" class="active">Games</button>
      <button id="appsTab">Apps</button>
    </div>
  </div>

  <main>
    <section class="hero">
      <h2>Diamond â€” Upgraded Gaming</h2>
      <p>Jump into any game, online, for free!</p>
      <div class="search-wrap">
        <div class="search"><input id="q" placeholder="Search..." /></div>
      </div>
    </section>

    <section class="grid" id="grid">
      <!-- cards injected by JS -->
    </section>
  </main>

  <!-- Modal -->
  <div id="modal" style="display:none;position:fixed;inset:0;justify-content:center;align-items:center;background:rgba(2,6,23,0.8);z-index:60">
    <div style="width:92%;max-width:1100px;height:80vh;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.04);box-shadow:0 30px 80px rgba(0,0,0,0.6);background:#07070b">
      <button id="closeModal" style="position:absolute;right:20px;top:16px;z-index:70;padding:8px 12px;border-radius:8px;background:rgba(255,255,255,0.06);border:none;color:#fff;cursor:pointer">Close</button>
      <iframe id="gameFrame" style="width:100%;height:100%;border:none" sandbox="allow-scripts allow-same-origin allow-pointer-lock"></iframe>
    </div>
  </div>

<script>
  // ---------- Game and App lists (embeds) ----------
  let GAMES = [];
  let APPS = [];

  const grid = document.getElementById('grid');
  const q = document.getElementById('q');
  const modal = document.getElementById('modal');
  const gameFrame = document.getElementById('gameFrame');
  const closeModal = document.getElementById('closeModal');
  const gamesTab = document.getElementById('gamesTab');
  const appsTab = document.getElementById('appsTab');

  // Load Games data
  function loadGames() {
    fetch('arcade_data.json')
      .then(r => r.json())
      .then(data => {
        GAMES = data.games;
        render(GAMES);
      })
      .catch(err => console.error('JSON load error', err));
  }

  // Load Apps data
  function loadApps() {
    fetch('apps_data.json')
      .then(r => r.json())
      .then(data => {
        APPS = data.apps;
        render(APPS);
      })
      .catch(err => console.error('JSON load error', err));
  }

  function createCard(item) {
    const el = document.createElement('article');
    el.className = 'card';

    const img = document.createElement('img');
    img.className = 'thumb';
    img.src = item.thumb;
    img.alt = item.title;

    const meta = document.createElement('div'); meta.className = 'meta';
    const h3 = document.createElement('h3'); h3.textContent = item.title;
    const btn = document.createElement('button'); btn.className = 'play'; btn.textContent = 'Play';

    btn.addEventListener('click', (e) => {
      e.stopPropagation();
      openItem(item);
    });

    meta.appendChild(h3); meta.appendChild(btn);
    el.appendChild(img); el.appendChild(meta);

    return el;
  }

  function render(items) {
    grid.innerHTML = '';
    items.filter(item => item.title.toLowerCase().includes(q.value.toLowerCase())).forEach(item => grid.appendChild(createCard(item)));
  }

  function openItem(item) {
    fetch(item.src)
      .then(response => response.text())
      .then(htmlContent => {
        gameFrame.contentDocument.open();
        gameFrame.contentDocument.write(htmlContent);
        gameFrame.contentDocument.close();
        modal.style.display = 'flex';
      })
      .catch(error => {
        console.error('Error loading item content:', error);
        gameFrame.contentDocument.open();
        gameFrame.contentDocument.write(`
          <div style="padding: 20px; color: white; background: #b91c1c; text-align: center; font-family: sans-serif; border-radius: 8px;">
            <h2 style="margin-top: 0; color: white;">ðŸ›‘ Error Loading Item ðŸ›‘</h2>
            <p>Could not load content. This usually happens when the host server sends the wrong file type.</p>
          </div>
        `);
        gameFrame.contentDocument.close();
      });
  }

  closeModal.addEventListener('click', () => {
    modal.style.display = 'none';
    gameFrame.src = '';
  });

  q.addEventListener('input', () => {
    if (gamesTab.classList.contains('active')) {
      render(GAMES);
    } else if (appsTab.classList.contains('active')) {
      render(APPS);
    }
  });

  // Tab Switch Functionality
  gamesTab.addEventListener('click', () => {
    gamesTab.classList.add('active');
    appsTab.classList.remove('active');
    loadGames();
  });

  appsTab.addEventListener('click', () => {
    appsTab.classList.add('active');
    gamesTab.classList.remove('active');
    loadApps();
  });

  // Initialize with Games Tab Active
  gamesTab.classList.add('active');
  loadGames();
</script>
</body>
</html>

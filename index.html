<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Diamond - Better Gaming</title>
  <link rel="icon" href="favicon.png" type="image/png">
  <style>
    /* ---------- Root & Reset ---------- */
    :root{
      --bg: linear-gradient(135deg, #2c3e50, #4ca1af); /* Smooth gradient background */
      --panel: rgba(255,255,255,0.03);
      --glass: rgba(255,255,255,0.04);
      --accent1: 220 88% 60%; /* blue */
      --accent2: 280 88% 60%; /* purple */
      --accent3: 140 75% 50%; /* green */
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0;background:var(--bg);color:#e6eef8;font-family: 'Inter', sans-serif}

/* ---------- Navbar Styles ---------- */
.hud{
  position: fixed;
  top: 20px;
  left: 0; /* Ensure it covers the full width */
  width: 100%; /* Full width */
  z-index: 30;
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 10px 32px; /* Reduce padding for a shorter navbar */
  background: rgba(0, 0, 0, 0.3);
  border-radius: 10px;
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
}

.logo{
  display: flex;
  align-items: center;
  gap: 12px;
}

.logo .mark{
  width: 40px;
  height: 40px;
  border-radius: 9px;
  box-shadow: 0 8px 30px rgba(145, 90, 255, 0.2);
}

.logo h1{
  font-size: 24px;
  font-weight: bold;
}

.hud .right{
  margin-left: auto;
  display: flex;
  gap: 16px;
}

.hud button{
  padding: 8px 16px; /* Reduced padding for smaller buttons */
  font-size: 16px;
  font-weight: 600;
  border: none;
  border-radius: 12px;
  background: linear-gradient(145deg, var(--accent1), var(--accent2));
  color: white;
  cursor: pointer;
  transition: all 0.3s ease;
}

.hud button:hover {
  background: linear-gradient(145deg, var(--accent2), var(--accent1));
  transform: translateY(-2px);
}

    .logo h1{font-size: 24px; font-weight: bold;}
    .hud .right{
      margin-left: auto;
      display: flex;
      gap: 16px;
    }
    .hud button{
      padding: 12px 24px;
      font-size: 16px;
      font-weight: 600;
      border: none;
      border-radius: 12px;
      background: linear-gradient(145deg, var(--accent1), var(--accent2));
      color: white;
      cursor: pointer;
      transition: all 0.3s ease;
    }
    .hud button:hover {
      background: linear-gradient(145deg, var(--accent2), var(--accent1));
      transform: translateY(-2px);
    }

    /* ---------- Hero Section Styles ---------- */
    .hero{
      padding-top: 120px;
      text-align: center;
      z-index: 5;
      position: relative;
      color: white;
    }
    .hero h2{
      font-size: 40px;
      margin: 0 0 16px;
      text-shadow: 0 8px 40px rgba(147, 51, 234, 0.2);
    }
    .hero p{
      margin: 0;
      font-size: 18px;
      color: rgba(230, 238, 248, 0.75);
    }

    /* ---------- Search Bar Styles ---------- */
    .search-wrap{
      display: flex;
      justify-content: center;
      margin-top: 24px;
    }
    .search{
      width: 80%;
      max-width: 600px;
      padding: 12px 18px;
      border-radius: 50px;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      box-shadow: 0 6px 30px rgba(99, 102, 241, 0.1);
      backdrop-filter: blur(10px);
    }
    .search input{
      flex: 1;
      background: transparent;
      border: none;
      color: inherit;
      font-size: 16px;
      padding: 8px 12px;
      outline: none;
      border-radius: 50px;
    }

    /* ---------- Grid Styles ---------- */
    .grid{
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      max-width: 1200px;
      margin: 40px auto;
      padding: 0 18px;
    }

    /* ---------- Card Styles ---------- */
    .card {
      position: relative;
      overflow: hidden;
      border-radius: 14px;
      padding: 12px;
      background: rgba(8, 9, 12, 0.7);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.6);
      transition: transform 250ms ease, box-shadow 250ms ease;
    }
    .card:hover {
      transform: translateY(-8px);
      box-shadow: 0 16px 40px rgba(0, 0, 0, 0.3);
    }
    .card .thumb {
      width: 100%;
      height: 150px;
      object-fit: cover;
      border-radius: 10px;
    }
    .card .meta {
      padding: 12px 6px;
      text-align: center;
    }
    .card h3 {
      font-size: 18px;
      margin: 8px 0;
    }
    .card .play {
      padding: 10px 14px;
      border-radius: 10px;
      border: none;
      background: linear-gradient(90deg, hsl(var(--accent1)), hsl(var(--accent2)));
      color: white;
      cursor: pointer;
      transition: transform 160ms;
    }
    .card .play:hover {
      transform: scale(1.05);
    }

    /* ---------- Responsive Styles ---------- */
    @media (max-width: 768px) {
      .hero h2 {
        font-size: 28px;
      }
      .search {
        width: 90%;
      }
    }
  </style>
</head>
<body>
  <div class="hud">
    <div class="logo">
      <div class="mark">
        <img src="favicon.png" alt="Logo" style="width: 40px; height: 40px; border-radius: 9px;">
      </div>
      <div>
        <h1>Diamond</h1>
        <div style="font-size:12px;color:rgba(230,238,248,0.7);">Upgraded Gaming</div>
      </div>
    </div>

    <div class="right">
      <button id="gamesTab" class="active">Games</button>
      <button id="appsTab">Apps</button>
      <span id="gamesCount" class="pill"></span>
    </div>
  </div>

  <main>
    <section class="hero">
      <h2>Diamond â€” Upgraded Gaming</h2>
      <p>Jump into any game, online, for free!</p>
      <div class="search-wrap">
        <div class="search"><input id="q" placeholder="Search..." /></div>
      </div>
    </section>

    <section class="grid" id="grid">
      <!-- cards injected by JS -->
    </section>
  </main>

  <!-- Modal -->
  <div id="modal" style="display:none;position:fixed;inset:0;justify-content:center;align-items:center;background:rgba(2,6,23,0.8);z-index:60">
    <div style="width:95%;max-width:1500px;height:90vh;border-radius:12px;overflow:hidden;border:1px solid rgba(255,255,255,0.04);box-shadow:0 30px 80px rgba(0,0,0,0.6);background:#07070b">
      <button id="closeModal" style="position:absolute;right:20px;top:16px;z-index:70;padding:8px 12px;border-radius:8px;background:rgba(255,255,255,0.06);border:none;color:#fff;cursor:pointer">Close</button>
      <iframe id="gameFrame" style="width:100%;height:100%;border:none" sandbox="allow-scripts allow-same-origin allow-pointer-lock"></iframe>
    </div>
  </div>

  <script>
    // ---------- Game and App lists (embeds) ----------
    let GAMES = [];
    let APPS = [];

    const grid = document.getElementById('grid');
    const q = document.getElementById('q');
    const modal = document.getElementById('modal');
    const gameFrame = document.getElementById('gameFrame');
    const closeModal = document.getElementById('closeModal');
    const gamesTab = document.getElementById('gamesTab');
    const appsTab = document.getElementById('appsTab');
    const gamesCountElement = document.getElementById('gamesCount');

    function loadApps() {
      fetch('apps_data.json')
        .then(r => r.json())
        .then(data => {
          APPS = data.apps;
          render(APPS); // Render the apps
          updateCount(); // Update count for apps
        })
        .catch(err => console.error('JSON load error', err));
    }

    function loadGames() {
      fetch('arcade_data.json')
        .then(r => r.json())
        .then(data => {
          GAMES = data.games;

          // Sort games alphabetically by title
          GAMES.sort((a, b) => a.title.localeCompare(b.title));

          render(GAMES); // Render the sorted games
          updateCount(); // Update count for games
        })
        .catch(err => console.error('JSON load error', err));
    }

    function createCard(item) {
      const el = document.createElement('article');
      el.className = 'card';

      const img = document.createElement('img');
      img.className = 'thumb';
      img.src = item.thumb;
      img.alt = item.title;

      const meta = document.createElement('div'); 
      meta.className = 'meta';
      const h3 = document.createElement('h3'); 
      h3.textContent = item.title;
      const btn = document.createElement('button'); 
      btn.className = 'play'; 
      btn.textContent = 'Play';

      btn.addEventListener('click', (e) => {
        e.stopPropagation();
        openItem(item);
      });

      meta.appendChild(h3); 
      meta.appendChild(btn);
      el.appendChild(img); 
      el.appendChild(meta);

      return el;
    }

    function render(items) {
      grid.innerHTML = '';
      items.filter(item => item.title.toLowerCase().includes(q.value.toLowerCase())).forEach(item => grid.appendChild(createCard(item)));
    }

    function openItem(item) {
      fetch(item.src)
        .then(response => response.text())
        .then(htmlContent => {
          gameFrame.contentDocument.open();
          gameFrame.contentDocument.write(htmlContent);
          gameFrame.contentDocument.close();
          modal.style.display = 'flex';
        })
        .catch(error => {
          console.error('Error loading item content:', error);
          gameFrame.contentDocument.open();
          gameFrame.contentDocument.write(`
            <div style="padding: 20px; color: white; background: #b91c1c; text-align: center; font-family: sans-serif; border-radius: 8px;">
              <h2 style="margin-top: 0; color: white;">ðŸ›‘ Error Loading Item ðŸ›‘</h2>
              <p>Could not load content. This usually happens when the host server sends the wrong file type.</p>
            </div>
          `);
          gameFrame.contentDocument.close();
        });
    }

    closeModal.addEventListener('click', () => {
      modal.style.display = 'none';
      gameFrame.src = '';
    });

    q.addEventListener('input', () => {
      let filteredItems = gamesTab.classList.contains('active') ? GAMES : APPS;
      filteredItems = filteredItems.filter(item => item.title.toLowerCase().includes(q.value.toLowerCase()));
      render(filteredItems);
      updateCount(); // Update count after filtering
    });

    gamesTab.addEventListener('click', () => {
      gamesTab.classList.add('active');
      appsTab.classList.remove('active');
      loadGames(); // Ensure games load when the tab is clicked
    });

    appsTab.addEventListener('click', () => {
      appsTab.classList.add('active');
      gamesTab.classList.remove('active');
      loadApps(); // Ensure apps load when the tab is clicked
    });

    // Initialize with Games Tab Active
    gamesTab.classList.add('active');
    loadGames();

    // Function to update the count based on active tab
    function updateCount() {
      const itemCount = gamesTab.classList.contains('active') ? GAMES.length : APPS.length;
      gamesCountElement.textContent = `Count: ${itemCount}`;
    }
  </script>
</body>
</html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Diamond - Better Gaming</title>
  <link rel="icon" href="favicon.png" type="image/png">

  <!-- Inter font -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">

  <style>
    /* ---------- ROOT + RESET ---------- */
    :root {
      --bg: #030308;
      --panel: rgba(255,255,255,0.03);
      --glass: rgba(255,255,255,0.06);
      --glass-soft: rgba(255,255,255,0.03);
      --accent1: 220 85% 62%;
      --accent2: 280 85% 62%;
      --accent3: 150 70% 50%;
      --text: #e7eef6;
      --text-soft: rgba(231,238,246,0.75);
      --radius: 14px;
      --blur: 10px;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Inter', system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: radial-gradient(
          circle at 20% 20%,
          rgba(130,60,255,0.15),
          transparent 50%
        ),
        radial-gradient(
          circle at 80% 80%,
          rgba(60,180,255,0.12),
          transparent 55%
        ),
        var(--bg);
      color: var(--text);
      overflow-x: hidden;
      -webkit-font-smoothing: antialiased;
    }

    /* ---------- NAVBAR (HUD) ---------- */
    .hud {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 40;
      width: 92%;
      max-width: 1250px;
      padding: 14px 22px;
      display: flex;
      align-items: center;
      gap: 16px;
      border-radius: var(--radius);
      background: rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.05);
      backdrop-filter: blur(12px);
      box-shadow: 0 8px 40px rgba(0,0,0,0.45);
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo img {
      width: 42px;
      height: 42px;
      border-radius: 10px;
      box-shadow: 0 4px 18px rgba(147,51,234,0.4);
    }

    .logo h1 {
      font-size: 20px;
      font-weight: 700;
      margin-bottom: -4px;
    }

    .logo small {
      font-size: 12px;
      color: var(--text-soft);
    }

    .right {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    /* ---------- Better Buttons ---------- */
    .hud button {
      padding: 10px 18px;
      font-size: 15px;
      font-weight: 600;
      border-radius: 10px;
      border: none;
      cursor: pointer;
      background: rgba(255,255,255,0.04);
      color: var(--text);
      transition: 200ms ease;
      backdrop-filter: blur(6px);
    }

    .hud button:hover {
      background: rgba(255,255,255,0.08);
      transform: translateY(-1px);
    }

    .hud button.active {
      background: linear-gradient(
        135deg,
        hsl(var(--accent1)),
        hsl(var(--accent2))
      );
      color: white;
      box-shadow: 0 6px 20px rgba(0,0,0,0.35);
    }

    .pill {
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      font-size: 13px;
    }

    /* ---------- HERO ---------- */
    .hero {
      padding-top: 130px;
      text-align: center;
    }
    .hero h2 {
      font-size: 42px;
      font-weight: 800;
      margin-bottom: 8px;
      background: linear-gradient(
        90deg,
        hsl(var(--accent1)),
        hsl(var(--accent2))
      );
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }
    .hero p {
      color: var(--text-soft);
      font-size: 16px;
    }

    /* ---------- SEARCH ---------- */
    .search-wrap {
      margin-top: 22px;
      display: flex;
      justify-content: center;
    }

    .search {
      width: 680px;
      max-width: 92%;
      display: flex;
      align-items: center;
      background: rgba(255,255,255,0.05);
      border-radius: 999px;
      padding: 14px 20px;
      border: 1px solid rgba(255,255,255,0.05);
      backdrop-filter: blur(12px);
      transition: 200ms ease;
    }

    .search:focus-within {
      border-color: hsl(var(--accent1));
      box-shadow: 0 0 18px rgba(99,102,241,0.25);
    }

    .search input {
      flex: 1;
      background: transparent;
      border: none;
      outline: none;
      font-size: 16px;
      color: var(--text);
    }

    /* ---------- GRID ---------- */
    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 26px;
      padding: 40px 22px;
      max-width: 1250px;
      margin: auto;
    }

    /* ---------- CARD POLISHING ---------- */
    .card {
      background: rgba(255,255,255,0.03);
      border: 1px solid rgba(255,255,255,0.05);
      border-radius: var(--radius);
      height: 300px;
      padding: 12px;
      overflow: hidden;
      backdrop-filter: blur(8px);
      transition: 180ms ease, box-shadow 220ms ease;
      position: relative;
      cursor: pointer;
    }

    .card:hover {
      transform: translateY(-4px);
      box-shadow: 0 10px 30px rgba(0,0,0,0.35);
    }

    .thumb {
      width: 100%;
      height: 155px;
      border-radius: 10px;
      object-fit: cover;
      box-shadow: 0 4px 18px rgba(0,0,0,0.3);
    }

    .meta {
      text-align: center;
      padding-top: 14px;
    }

    .meta h3 {
      font-size: 18px;
      margin-bottom: 10px;
    }

    .play {
      padding: 10px 16px;
      border-radius: 10px;
      border: none;
      background: linear-gradient(
        90deg,
        hsl(var(--accent1)),
        hsl(var(--accent2))
      );
      color: white;
      cursor: pointer;
      transition: 150ms ease;
    }

    .play:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.45);
    }

    /* ---------- MODAL POLISH ---------- */
    #modal {
      display: none;
      position: fixed;
      inset: 0;
      justify-content: center;
      align-items: center;
      background: rgba(0,0,0,0.65);
      backdrop-filter: blur(6px);
      z-index: 50;
    }

    #modal > div {
      position: relative;
      width: 95%;
      max-width: 1500px;
      height: 90vh;
      border-radius: var(--radius);
      background: #0b0b11;
      border: 1px solid rgba(255,255,255,0.05);
      box-shadow: 0 20px 60px rgba(0,0,0,0.6);
      overflow: hidden;
      animation: popup 250ms ease;
    }

    @keyframes popup {
      from { transform: scale(.92); opacity:0; }
      to   { transform: scale(1);   opacity:1; }
    }

    #closeModal {
      position: absolute;
      top: 14px;
      right: 14px;
      padding: 8px 14px;
      background: rgba(255,255,255,0.08);
      border-radius: 8px;
      border: none;
      color: white;
      cursor: pointer;
      z-index: 20;
    }

    #closeModal:hover {
      background: rgba(255,255,255,0.14);
    }

    /* ---------- SETTINGS MODAL ---------- */
    #settingsModal {
      display:none;
      position: fixed;
      inset: 0;
      justify-content:center;
      align-items:center;
      background: rgba(0,0,0,0.55);
      backdrop-filter: blur(6px);
      z-index: 60;
      opacity: 0;
      transition: opacity .25s ease;
    }

    #settingsModal.show {
      opacity:1;
    }

    #settingsModal > div {
      background: #111;
      padding: 30px;
      border-radius: 12px;
      max-width: 420px;
      width: 92%;
      text-align:center;
      border:1px solid rgba(255,255,255,0.08);
      box-shadow: 0 20px 60px rgba(0,0,0,0.55);
      transform: scale(.92);
      opacity:0;
      transition:300ms ease;
    }

    #settingsModal.show > div {
      transform: scale(1);
      opacity:1;
    }

    .theme-option {
      padding: 12px;
      background: rgba(255,255,255,0.04);
      border-radius: 10px;
      cursor:pointer;
      transition:180ms ease;
      margin-bottom: 6px;
    }

    .theme-option:hover {
      background: rgba(255,255,255,0.1);
      transform: translateY(-2px);
    }

    .theme-option.active {
      background: linear-gradient(
        135deg,
        hsl(var(--accent2)),
        hsl(var(--accent1))
      );
      color:white;
    }
  </style>
</head>
<body>

  <!-- NAVBAR / HUD -->
  <div class="hud">
    <div class="logo">
      <img src="favicon.png" alt="Logo">
      <div>
        <h1>Diamond</h1>
        <small>Upgraded Gaming</small>
      </div>
    </div>

    <div class="right">
      <button id="gamesTab" class="active">Games</button>
      <button id="appsTab">Apps</button>
      <button id="unlockerTab">Unlocker</button>
      <span id="gamesCount" class="pill">Count: 0</span>
      <button id="settingsButton">Settings</button>
    </div>
  </div>

  <!-- MAIN CONTENT -->
  <main>
    <section class="hero">
      <h2>Diamond — Upgraded Gaming</h2>
      <p>Jump into any game, instantly.</p>

      <div class="search-wrap">
        <div class="search">
          <input id="q" placeholder="Search..." />
        </div>
      </div>
    </section>

    <section class="grid" id="grid">
      <!-- JS injects cards here -->
    </section>
  </main>


  <!-- GAME/APP MODAL -->
  <div id="modal">
    <div>
      <button id="closeModal">Close</button>
      <iframe id="gameFrame"
        style="width:100%;height:100%;border:none"
        sandbox="allow-scripts allow-same-origin allow-pointer-lock">
      </iframe>
    </div>
  </div>


  <!-- SETTINGS MODAL -->
  <div id="settingsModal">
    <div>
      <button id="closeSettings" style="position:absolute;right:20px;top:16px;border:none;background:rgba(255,255,255,0.08);padding:8px 10px;border-radius:8px;color:white;font-size:18px;cursor:pointer">×</button>

      <h3 style="margin-bottom:8px;font-size:26px;">Settings</h3>
      <h4 style="color:var(--text-soft);margin-bottom:16px;font-size:18px;">Select Theme</h4>

      <div id="themeOptions"></div>
    </div>
  </div>
  <script>
// ------------------ ELEMENTS ------------------
const gamesTab = document.getElementById('gamesTab');
const appsTab = document.getElementById('appsTab');
const unlockerTab = document.getElementById('unlockerTab');

const modal = document.getElementById('modal');
const gameFrame = document.getElementById('gameFrame');
const closeModal = document.getElementById('closeModal');

const settingsButton = document.getElementById('settingsButton');
const settingsModal = document.getElementById('settingsModal');
const closeSettings = document.getElementById('closeSettings');

const gamesCountElement = document.getElementById('gamesCount');
const searchInput = document.getElementById('q');

let lastActiveTab = 'games';
let GAMES = [];
let APPS = [];

// ------------------ LOAD DATA ------------------
function loadGames() {
  fetch('arcade_data.json')
    .then(r => r.json())
    .then(data => {
      GAMES = data.games || [];
      render(GAMES);
      updateCount();
    })
    .catch(err => console.error('Game JSON error:', err));
}

function loadApps() {
  fetch('apps_data.json')
    .then(r => r.json())
    .then(data => {
      APPS = data.apps || [];
      render(APPS);
      updateCount();
    })
    .catch(err => console.error('Apps JSON error:', err));
}

// ------------------ RENDER ------------------
function render(items) {
  const grid = document.getElementById('grid');
  const q = searchInput.value.toLowerCase();

  grid.innerHTML = '';

  items
    .filter(item => item.title.toLowerCase().includes(q))
    .forEach(item => grid.appendChild(createCard(item)));
}

function createCard(item) {
  const el = document.createElement('article');
  el.className = 'card';

  const img = document.createElement('img');
  img.className = 'thumb';
  img.src = item.thumb;
  img.alt = item.title;

  const meta = document.createElement('div');
  meta.className = 'meta';

  const h3 = document.createElement('h3');
  h3.textContent = item.title;

  const btn = document.createElement('button');
  btn.className = 'play';
  btn.textContent = 'Play';
  btn.addEventListener('click', (e) => {
    e.stopPropagation();
    openItem(item);
  });

  meta.appendChild(h3);
  meta.appendChild(btn);

  el.appendChild(img);
  el.appendChild(meta);

  return el;
}

// ------------------ OPEN GAME/APP ------------------
function openItem(item) {
  fetch(item.src)
    .then(res => res.text())
    .then(html => {
      modal.style.display = 'flex';
      gameFrame.contentDocument.open();
      gameFrame.contentDocument.write(html);
      gameFrame.contentDocument.close();
    })
    .catch(() => {
      modal.style.display = 'flex';
      gameFrame.contentDocument.open();
      gameFrame.contentDocument.write(`
        <div style="
          padding: 30px;
          color: white;
          background: #b91c1c;
          text-align: center;
          font-family: sans-serif;">
          <h2>Error Loading Content</h2>
          <p>The server returned an invalid file type.</p>
        </div>
      `);
      gameFrame.contentDocument.close();
    });
}

// ------------------ MODAL HANDLING ------------------
closeModal.addEventListener('click', () => {
  modal.style.display = 'none';
  gameFrame.src = '';

  // restore UI
  if (lastActiveTab === 'games') {
    gamesTab.classList.add('active');
    appsTab.classList.remove('active');
    unlockerTab.classList.remove('active');
    loadGames();
  } else if (lastActiveTab === 'apps') {
    appsTab.classList.add('active');
    gamesTab.classList.remove('active');
    unlockerTab.classList.remove('active');
    loadApps();
  }
});

// ------------------ TAB SWITCHING ------------------
gamesTab.addEventListener('click', () => {
  lastActiveTab = 'games';

  gamesTab.classList.add('active');
  appsTab.classList.remove('active');
  unlockerTab.classList.remove('active');

  modal.style.display = 'none';
  loadGames();
});

appsTab.addEventListener('click', () => {
  lastActiveTab = 'apps';

  appsTab.classList.add('active');
  gamesTab.classList.remove('active');
  unlockerTab.classList.remove('active');

  modal.style.display = 'none';
  loadApps();
});

unlockerTab.addEventListener('click', () => {
  unlockerTab.classList.add('active');
  gamesTab.classList.remove('active');
  appsTab.classList.remove('active');

  modal.style.display = 'flex';
  gameFrame.src = 'https://ihce0h92o3nndk0.pages.dev/';
});

// ------------------ SEARCH ------------------
searchInput.addEventListener('input', () => {
  if (gamesTab.classList.contains('active')) {
    render(GAMES);
  } else {
    render(APPS);
  }
});

// ------------------ COUNT ------------------
function updateCount() {
  const count = gamesTab.classList.contains('active') ? GAMES.length : APPS.length;
  gamesCountElement.textContent = `Count: ${count}`;
}

// ------------------ SETTINGS MODAL ------------------
settingsButton.addEventListener('click', () => {
  settingsModal.classList.add('show');
  settingsModal.style.display = 'flex';
});

closeSettings.addEventListener('click', () => {
  settingsModal.classList.remove('show');
  setTimeout(() => settingsModal.style.display = 'none', 250);
});

// ------------------ THEME LOADING ------------------
fetch('themes.json')
  .then(r => r.json())
  .then(data => {
    const themeOptions = document.getElementById('themeOptions');
    data.themes.forEach(theme => {
      const opt = document.createElement('div');
      opt.className = 'theme-option';
      opt.textContent = theme.name;

      opt.addEventListener('click', () => changeTheme(theme, opt));

      themeOptions.appendChild(opt);
    });
  })
  .catch(err => console.error('Theme JSON error:', err));

// ------------------ APPLY THEME ------------------
function changeTheme(theme, option) {
  Object.keys(theme).forEach(key => {
    document.documentElement.style.setProperty(key, theme[key]);
  });

  document.querySelectorAll('.theme-option').forEach(o => o.classList.remove('active'));
  option.classList.add('active');
}

// ------------------ INIT ------------------
gamesTab.classList.add('active');
loadGames();
</script>
</body>
</html>
